<div class="row">
    <div class="col">
        <label>Bereits erstellte QR-Codes anzeigen</label>
        <br>
        <div class="btn-group">
            <button id="btn-get-all" class="btn btn-custom" onclick="getQrcodes('all')">Alle</button>
            <button id="btn-get-unused" class="btn btn-custom" onclick="getQrcodes('unused')">Unregistrierte</button>
        </div>
        <button hidden id="refresh-get-all" class="btn btn-custom"><i class="fas fa-sync-alt fa-flip-horizontal" onclick="document.getElementById('btn-get-all').click()"></i></button>
        <button hidden id="refresh-get-unused" class="btn btn-custom"><i class="fas fa-sync-alt fa-flip-horizontal" onclick="document.getElementById('btn-get-unused').click()"></i></button>
    </div>
</div>
<div class="row" id="view-row">

</div>

<script>
    function getQrcodes(type) {
        switch (type) {
            case "all":
                document.getElementById("refresh-get-all").hidden = false
                document.getElementById("refresh-get-unused").hidden = true
                break;
        
            case "unused":
                document.getElementById("refresh-get-unused").hidden = false
                document.getElementById("refresh-get-all").hidden = true
                break;
        }
        fetch("/admin/qrcode/getFiles", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                "type": type
            }),
        })
        .then(response => response.json())
        .then(files => {
            const row = document.getElementById("view-row")
            row.innerHTML = ""
            files.forEach(file => {
                const col = document.createElement("div")
                col.classList.add("col")
                col.innerHTML = file.content
                row.append(col)
            })
        })
    }
</script>