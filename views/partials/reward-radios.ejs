<label for="choice1">
    <input type="radio" name="reward" id="choice1" data-type="1">
    Eine Kugel Eis im Becher mit unserem EATlery&copy; Löffel
</label>
<br>
<label for="choice2">
    <input type="radio" name="reward" id="choice2" data-type="2">
    Extra Portion Sahne auf ein Eis
</label>
<br>
<label for="choice3">
    <input type="radio" name="reward" id="choice3" data-type="3">
    Eine Kugel Eis extra
</label>
<br>
<b>oder</b>
<br>
<label for="choice4">
    <input type="radio" name="reward" id="choice4" data-type="4">
    Ich möchte selbst entscheiden, was als Preis verteilt wird
</label>
<script>

    // get the current reward type

    fetch("/reward/get")
    .then(response => response.json())
    .then(user => {
        switch (user.rewardType) {
            case "1":
                document.getElementById("choice1").checked = true
                break;
            case "2":
                document.getElementById("choice2").checked = true
                break;
            case "3":
                document.getElementById("choice3").checked = true
                break;
            case "4":
                document.getElementById("choice4").checked = true
                break;
        }
    })


    // set the reward type in backend

    const choices = document.getElementsByName("reward")

    for (let i = 0; i < choices.length; i++) {
        const choice = choices[i]
        const type = choice.attributes.getNamedItem("data-type").value
        choice.addEventListener("click", () => {
            fetch("/reward/set", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    "type": type
                }),
            })
        })
    }
</script>